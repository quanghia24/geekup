{% extends 'index.html' %}

{% block title %}
Category List
{% endblock %}

{% block head %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Fetch categories from the API
        fetch('/api/categories/')
            .then(response => response.json())
            .then(data => {
                const categoryList = document.getElementById('category-list');
                categoryList.innerHTML = ''; // Clear any placeholder content

                // Populate the list with categories
                data.forEach(category => {
                    const listItem = document.createElement('li');
                    const link = document.createElement('a');
                    link.href = `/categories/${category.category_id}/products/`;
                    link.textContent = `${category.category_id}: ${category.name}`;
                    listItem.appendChild(link);
                    categoryList.appendChild(listItem);
                });
            })
            .catch(error => console.error('Error fetching categories:', error));
    });
</script>
{% endblock %}

{% block content %}
<h2>Categories</h2>
<ul id="category-list">
    <li>Loading...</li> <!-- Placeholder until data is fetched -->
</ul>
{% endblock %}
